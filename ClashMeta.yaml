mixed-port: 7890
log-level: info
ipv6: true # å¼€å¯ IPv6 æ€»å¼€å…³ï¼Œå…³é—­é˜»æ–­æ‰€æœ‰ IPv6 é“¾æ¥å’Œå±è”½ DNS è¯·æ±‚ AAAA è®°å½•
mode: rule
allow-lan: true
bind-address: "*" # ç»‘å®š IP åœ°å€ï¼Œä»…ä½œç”¨äº allow-lan ä¸º trueï¼Œ'*'è¡¨ç¤ºæ‰€æœ‰åœ°å€
global-client-fingerprint: chrome
external-controller: 0.0.0.0:9090
find-process-mode: strict
tcp-concurrent: true
geodata-mode: true
geox-url:
  geoip: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
  geosite: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
  mmdb: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.metadb"
sniffer:
  enable: false
  sniff:
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
tun:
  enable: true
  stack: system
  dns-hijack:
    - '0.0.0.0:53'
  auto-route: false
  auto-detect-interface: false
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter:
  - '*'
  - '+.lan'
  default-nameserver:
  - 223.5.5.5
  nameserver:
    - 114.114.114.114 # default value
    - 8.8.8.8 # default value
  proxy-server-nameserver:
  - https://doh.pub/dns-query
  nameserver-policy:
    "geosite:cn,private":
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
proxy-providers:
  clashmeta:
    type: http
    url: "https://gist.githubusercontent.com/Anlanxy/a46b4d060291eded5b2c3d3f92d4aee1/raw/Meta"
    interval: 1200
    # path: ./provider1.yaml # é»˜è®¤åªå…è®¸å­˜å‚¨åœ¨ mihomo çš„ Home Dirï¼Œå¦‚æœæƒ³å­˜å‚¨åˆ°ä»»æ„ä½ç½®ï¼Œæ·»åŠ ç¯å¢ƒå˜é‡ SKIP_SAFE_PATH_CHECK=1
    health-check:
      enable: true
      interval: 300
      url: https://cp.cloudflare.com/generate_204
proxy-groups:
  - name: ğ‘·ğ’“ğ’ğ’™ğ’Šğ’†ğ’”
    type: select
    proxies:
      - ğ‘ºğ’†ğ’ğ’†ğ’„ğ’•
      - ğ‘­ğ’‚ğ’ğ’ğ’ƒğ’‚ğ’„ğ’Œ
      - ğ‘©ğ’‚ğ’ğ’‚ğ’ğ’„ğ’† ğ‘·ğ‘ªğ‘ª
      - ğ‘«ğ’Šğ’“ğ’†ğ’„ğ’•
  - name: ğ‘´ğ’†ğ’…ğ’Šğ’‚â—†
    type: select
    proxies:
      - ğ‘ºğ’†ğ’ğ’†ğ’„ğ’•
      - ğ‘­ğ’‚ğ’ğ’ğ’ƒğ’‚ğ’„ğ’Œ
      - ğ‘«ğ’Šğ’“ğ’†ğ’„ğ’•
  - name: ğ‘´ğ’†ğ’…ğ’Šğ’‚â—‡
    type: select
    proxies:
      - ğ‘¯ğ‘²*
      - ğ‘»ğ‘¾*
      - ğ‘«ğ’Šğ’“ğ’†ğ’„ğ’•
  - name: ğ‘ºğ’†ğ’“ğ’—ğ’Šğ’„ğ’†
    type: select
    proxies:
      - ğ‘ºğ’†ğ’ğ’†ğ’„ğ’•
      - ğ‘«ğ’Šğ’“ğ’†ğ’„ğ’•
  - name: ğ‘¨ğ‘·ğ‘·
    type: select
    proxies:
      - ğ‘­ğ’‚ğ’ğ’ğ’ƒğ’‚ğ’„ğ’Œ
      - ğ‘ºğ’†ğ’ğ’†ğ’„ğ’•
      - ğ‘«ğ’Šğ’“ğ’†ğ’„ğ’•
  - name: ğ‘­ğ’Šğ’ğ’‚ğ’
    type: select
    proxies:
      - ğ‘ºğ’†ğ’ğ’†ğ’„ğ’•
      - ğ‘·ğ’“ğ’ğ’™ğ’Šğ’†ğ’”
      - ğ‘«ğ’Šğ’“ğ’†ğ’„ğ’•
  - name: ğ‘ºğ’†ğ’ğ’†ğ’„ğ’•
    type: select
    proxies:
      - ğ‘¯ğ‘²*
      - ğ‘»ğ‘¾*
      - ğ‘±ğ‘·*
      - ğ‘ºğ‘®*
      - ğ‘¼ğ‘º*
      - ğ‘¶ğ‘¹^
  - name: ğ‘­ğ’‚ğ’ğ’ğ’ƒğ’‚ğ’„ğ’Œ
    type: fallback
    url: 'https://www.gstatic.com/generate_204'
    interval: 150
    proxies:
      - ğ‘¯ğ‘²*
      - ğ‘»ğ‘¾*
      - ğ‘±ğ‘·*
      - ğ‘¼ğ‘º*
      - ğ‘ºğ‘®*
  - name: ğ‘¨ğ‘« ğ‘©ğ’ğ’ğ’„ğ’Œ
    type: select
    proxies:
      - REJECT
  - name: ğ‘©ğ’‚ğ’ğ’‚ğ’ğ’„ğ’† ğ‘·ğ‘ªğ‘ª
    type: load-balance
    url: 'https://www.gstatic.com/generate_204'
    interval: 200
    filter: ğ»ğ‘œğ‘›ğ‘” ğ¾ğ‘œğ‘›ğ‘”|ğ‘‡ğ‘ğ‘–ğ‘¤ğ‘ğ‘›|ğ‘ˆğ‘›ğ‘–ğ‘¡ğ‘’ğ‘‘ ğ‘†ğ‘¡ğ‘ğ‘¡ğ‘’ğ‘ 
    use:
      - clashmeta
  - name: ğ‘¶ğ‘¹^
    type: select
    exclude-filter: ğ»ğ‘œğ‘›ğ‘” ğ¾ğ‘œğ‘›ğ‘”|ğ‘‡ğ‘ğ‘–ğ‘¤ğ‘ğ‘›|ğ½ğ‘ğ‘ğ‘ğ‘›|ğ‘ˆğ‘›ğ‘–ğ‘¡ğ‘’ğ‘‘ ğ‘†ğ‘¡ğ‘ğ‘¡ğ‘’ğ‘ |ğ‘†ğ‘–ğ‘›ğ‘”ğ‘ğ‘ğ‘œğ‘Ÿğ‘’|ğ‘ˆğ‘›ğ‘–ğ‘¡ğ‘’ğ‘‘ ğ¾ğ‘–ğ‘›ğ‘”ğ‘‘ğ‘œğ‘š
    use:
      - clashmeta
  - name: ğ‘«ğ’Šğ’“ğ’†ğ’„ğ’•
    type: select
    proxies:
      - DIRECT
  - name: ğ‘¯ğ‘²*
    type: url-test
    url: 'https://cp.cloudflare.com/generate_204'
    filter: "ğ»ğ‘œğ‘›ğ‘” ğ¾ğ‘œğ‘›ğ‘”"
    tolerance: 30
    interval: 120
    use:
      - clashmeta
  - name: ğ‘»ğ‘¾*
    type: url-test
    url: 'https://cp.cloudflare.com/generate_204'
    filter: "ğ‘‡ğ‘ğ‘–ğ‘¤ğ‘ğ‘›"
    tolerance: 30
    interval: 120
    use:
      - clashmeta
  - name: ğ‘±ğ‘·*
    type: url-test
    url: 'https://cp.cloudflare.com/generate_204'
    filter: "ğ½ğ‘ğ‘ğ‘ğ‘›"
    tolerance: 30
    interval: 120
    use:
      - clashmeta
  - name: ğ‘¼ğ‘º*
    type: url-test
    url: 'https://cp.cloudflare.com/generate_204'
    filter: "ğ‘ˆğ‘›ğ‘–ğ‘¡ğ‘’ğ‘‘ ğ‘†ğ‘¡ğ‘ğ‘¡ğ‘’ğ‘ "
    tolerance: 30
    interval: 120
    use:
      - clashmeta
  - name: ğ‘ºğ‘®*
    type: url-test
    url: 'https://cp.cloudflare.com/generate_204'
    filter: "ğ‘†ğ‘–ğ‘›ğ‘”ğ‘ğ‘ğ‘œğ‘Ÿğ‘’"
    tolerance: 30
    interval: 120
    use:
      - clashmeta
  - name: ğ‘¼ğ‘²*
    type: url-test
    url: 'https://cp.cloudflare.com/generate_204'
    filter: "ğ‘ˆğ‘›ğ‘–ğ‘¡ğ‘’ğ‘‘ ğ¾ğ‘–ğ‘›ğ‘”ğ‘‘ğ‘œğ‘š"
    tolerance: 30
    interval: 120
    use:
      - clashmeta
rule-providers:
  Direct:
    behavior: classical
    interval: 86400
    path: ./ruleset/direct.yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Direct/Direct.yaml"
  Reject:
    behavior: classical
    interval: 86400
    path: ./ruleset/reject.yaml
    type: http
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising_Classical.yaml"
  Proxy:
    behavior: classical
    interval: 86400
    path: ./ruleset/ProxyLite.yaml
    type: http
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ProxyLite/ProxyLite.yaml"
  AsianMedia:
    behavior: classical
    interval: 86400
    path: ./ruleset/AsianMedia.yaml
    type: http
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AsianMedia/AsianMedia.yaml"
  # Bilibili:
  #   behavior: classical
  #   interval: 86400
  #   path: ./ruleset/BiliBili.yaml
  #   type: http
  #   url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml"
  Bahamut:
    behavior: classical
    interval: 86400
    path: ./ruleset/bahamut.yaml
    type: http
    url: "https://raw.githubusercontent.com/Anlanxy/Net-Music/master/Bahamut.yaml"
  Abema:
    behavior: classical
    interval: 86400
    path: ./ruleset/AbemaTV.yaml
    type: http
    url: "https://raw.githubusercontent.com/Anlanxy/Net-Music/master/AbemaTV.yaml"
  Youtube:
    behavior: classical
    interval: 86400
    path: ./ruleset/YouTube.yaml
    type: http
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml"
  YouTubeMusic:
    behavior: classical
    interval: 86400
    path: ./ruleset/YouTubeMusic.yaml
    type: http
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTubeMusic/YouTubeMusic.yaml"
  Netfilx:
    behavior: classical
    interval: 86400
    path: ./ruleset/Netflix.yaml
    type: http
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml"
  Spotify:
    behavior: classical
    interval: 86400
    path: ./ruleset/Spotify.yaml
    type: http
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml"
  Telegram:
    behavior: classical
    interval: 86400
    path: ./ruleset/Telegram.yaml
    type: http
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml"
  Discord:
    behavior: classical
    interval: 86400
    path: ./ruleset/Discord.yaml
    type: http
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Discord/Discord.yaml"
  # Instagram:
  #   behavior: classical
  #   interval: 86400
  #   path: ./ruleset/reject.yaml
  #   type: http
  #   url: ""
  # Twitter:
  #   behavior: classical
  #   interval: 86400
  #   path: ./ruleset/reject.yaml
  #   type: http
  #   url: ""
  # Steam:
  #   behavior: classical
  #   interval: 86400
  #   path: ./ruleset/reject.yaml
  #   type: http
  #   url: ""
  Paypal:
    behavior: classical
    interval: 86400
    path: ./ruleset/reject.yaml
    type: http
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PayPal/PayPal.yaml"
  PikPak:
    behavior: classical
    interval: 86400
    path: ./ruleset/reject.yaml
    type: http
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PikPak/PikPak.yaml"
rules:
  - RULE-SET,Reject,ğ‘¨ğ‘« ğ‘©ğ’ğ’ğ’„ğ’Œ
  - RULE-SET,Proxy,ğ‘·ğ’“ğ’ğ’™ğ’Šğ’†ğ’”
  - GEOSITE,github,ğ‘·ğ’“ğ’ğ’™ğ’Šğ’†ğ’”
  - GEOSITE,google,ğ‘·ğ’“ğ’ğ’™ğ’Šğ’†ğ’”
  - RULE-SET,Paypal,ğ‘ºğ’†ğ’“ğ’—ğ’Šğ’„ğ’†
  - RULE-SET,Spotify,ğ‘¨ğ‘·ğ‘·
  - RULE-SET,PikPak,ğ‘¨ğ‘·ğ‘·
  - RULE-SET,Telegram,ğ‘¨ğ‘·ğ‘·
  - RULE-SET,Discord,ğ‘¨ğ‘·ğ‘·
  - GEOSITE,twitter,ğ‘¨ğ‘·ğ‘·
  - GEOSITE,Instagram,ğ‘¨ğ‘·ğ‘·
  - GEOSITE,ehentai,ğ‘ºğ’†ğ’“ğ’—ğ’Šğ’„ğ’†
  - GEOSITE,steam,ğ‘¨ğ‘·ğ‘·
  - RULE-SET,AsianMedia,ğ‘´ğ’†ğ’…ğ’Šğ’‚â—‡
  - RULE-SET,Bahamut,ğ‘´ğ’†ğ’…ğ’Šğ’‚â—†
  - RULE-SET,Abema,ğ‘´ğ’†ğ’…ğ’Šğ’‚â—†
  - RULE-SET,Youtube,ğ‘´ğ’†ğ’…ğ’Šğ’‚â—†
  - RULE-SET,Netfilx,ğ‘´ğ’†ğ’…ğ’Šğ’‚â—†
  - RULE-SET,YouTubeMusic,ğ‘´ğ’†ğ’…ğ’Šğ’‚â—†
  # - GEOSITE,bilibili,
  - GEOSITE,CN,ğ‘«ğ’Šğ’“ğ’†ğ’„ğ’•
  - GEOIP,CN,ğ‘«ğ’Šğ’“ğ’†ğ’„ğ’•
  - MATCH,ğ‘­ğ’Šğ’ğ’‚ğ’
